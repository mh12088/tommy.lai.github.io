{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/components/toggle-switch/toggle-switch.component.ts","webpack:///src/app/components/toggle-switch/toggle-switch.component.html","webpack:///src/app/components/web-authn-mock/web-authn-mock.component.ts","webpack:///src/app/components/web-authn-mock/web-authn-mock.component.html","webpack:///src/app/components/web-authn/utils/app-util.ts","webpack:///src/app/components/web-authn/web-authn.component.ts","webpack:///src/app/components/web-authn/web-authn.component.html","webpack:///src/app/push-notification/push-notification.component.ts","webpack:///src/app/push-notification/push-notification.component.html","webpack:///src/app/pwa-install-promotion/pwa-install-promotion.component.ts","webpack:///src/app/pwa-install-promotion/pwa-install-promotion.component.html","webpack:///src/app/pwa-install-promotion/service/google-analytics-service.ts","webpack:///src/app/services/mock.service.ts","webpack:///src/app/services/web-authn-api.service.ts","webpack:///src/app/services/web-authn-mock.service.ts","webpack:///src/app/services/web-authn-service.ts","webpack:///src/app/utils/cbor.js","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","AppRoutingModule","forRoot","imports","AppComponent","title","deviceId","localStorage","getItem","setItem","isMock","event","updateIsMockFlag","selector","templateUrl","styleUrls","AppModule","register","enabled","production","declarations","providers","bootstrap","ToggleSwitchComponent","mockService","callback","isChecked","JSON","parse","flagName","stringify","removeItem","emit","resetUser","onChange","WebAuthnMockComponent","webAuthnMockService","errorMsg","userList","userForm","email","required","mobileNumber","pattern","isEnableBiometricLogin","authenticator","get","getAllUser","isSupportBiometricLogin$","isSupportBiometricLogin","user","credentials","length","isConfirm","confirm","webAuthnSignup","updateUser","deleteUser","window","PublicKeyCredential","reject","isUserVerifyingPlatformAuthenticatorAvailable","available","console","log","error","value","errorMsgList","validateCreateUser","alert","toString","userFromDB","createUser","signup","credential","urlbase64","decodePublicKeyCredentialToBase64String","decodePublicKeyCredential","valid","registerCredential","getUserByMobileNumber","getUserByDeviceId","signin","assertion","obj","type","response","authenticatorData","clientDataJSON","signature","userHandle","rawId","Uint8Array","decodeAssertion","registerPayload","loginPayload","WebAuthnComponent","webAuthnService","webAuthnAPIService","signupFlow","subscribe","credentialIdString","authenticatorString","signinFlow","PushNotificationComponent","Notification","requestPermission","status","PwaInstallPromotionComponent","http","_$gaService","showPromotion","showIOSPromotion","device","installStatus","products","url","logEvent","detectDevice","displayMode","getPWADisplayMode","getTestingData","data","userAgent","navigator","toLowerCase","match","isStandalone","matchMedia","matches","document","referrer","startsWith","standalone","preventDefault","deferredPrompt","showInstallPromotion","hideInstallPromotion","prompt","userChoice","choiceResult","outcome","GoogleAnalyticsService","_router","events","pipe","gtag","Date","script","createElement","src","async","getElementsByTagName","appendChild","gtagEl","gtagBody","createTextNode","body","category","label","event_category","event_label","providedIn","MockService","find","challenge","crypto","getRandomValues","getUserByEmail","push","saveChanges","splice","getUserIndex","findIndex","item","userIndex","arraybuffer","chars","lookup","i","charCodeAt","bytes","len","base64","substring","bufferLength","p","encoded1","encoded2","encoded3","encoded4","ArrayBuffer","pubKeyCred","base64urlEncode","Array","map","Object","key","arrayBufferToBase64","utf8Decoder","TextDecoder","decodedClientData","decode","clientDataObj","decodedAttestationObj","attestationObject","authData","extractAuthData","credentialIdLength","getCredentialIdLength","credentialId","slice","publicKeyBytes","publicKeyString","dataView","DataView","idLenBytes","forEach","index","setUint8","getUint16","buf","decoder","clientDataStr","arrayBufferToStr","buffer","binary","byteLength","String","fromCharCode","btoa","binary_string","atob","apply","replace","from","c","base64Url","v","WebAuthnAPIService","baseUrl","clientData","base64urlDecode","post","WebAuthnMockService","authenticatorAttachment","getPlatformFlag","genUUID","publicKeyCredentialCreationOptions","rp","name","displayName","pubKeyCredParams","alg","authenticatorSelection","userVerification","timeout","attestation","create","publicKey","transports","allowCredentials","base64ToArrayBuffer","credentialRequestOptions","WebAuthnService","generateUUIDv4","publicKeyCred","publicKeyCredentialToBase64Url","getChallengeFromServer","challengeResp","credentialBase64Url","webAuthnSignin","global","undefined","POW_2_24","POW_2_32","POW_2_53","encode","lastLength","offset","prepareWrite","newByteLength","requiredLength","oldDataView","uint32count","setUint32","getUint32","commitWrite","writeFloat64","setFloat64","writeUint8","writeUint8Array","writeUint16","setUint16","writeUint32","writeUint64","low","high","writeTypeAndLength","encodeItem","Math","floor","utf8data","charCode","isArray","ret","retView","getUint8","tagger","simpleValue","commitRead","readArrayBuffer","readFloat16","tempArrayBuffer","tempDataView","readUint16","sign","exponent","fraction","getFloat32","readFloat32","readFloat64","getFloat64","readUint8","readUint32","readUint64","readBreak","readLength","additionalInformation","readIndefiniteStringLength","majorType","initialByte","appendUtf16Data","utf16data","decodeItem","elements","fullArrayLength","fullArray","fullArrayOffset","set","retArray","retObject","environment","addEventListener","serviceWorker","swReg","err"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { GoogleAnalyticsService } from './pwa-install-promotion/service/google-analytics-service';\nimport * as uuid from 'uuid';\nimport { initializeApp } from \"firebase/app\";\nimport { getMessaging, getToken, onMessage } from \"firebase/messaging\";\nimport { FireBaseService } from './push-notification/service/firebase.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit {\n  title = 'biometric-login-demo';\n  isMock: boolean;\n  constructor() { }\n\n  ngOnInit() {\n    // this._$gaService.init();\n    const deviceId = uuid.v4();\n    if (!localStorage.getItem(\"device_id\")) {\n      localStorage.setItem(\"device_id\", deviceId);\n    };\n    this.isMock = localStorage.getItem('isMock') === 'true' ? true : false;\n\n    // this._$firebaseService.init();\n  }\n\n  updateIsMockFlag(event) {\n    this.isMock = event;\n  }\n}\n","<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->\n<!-- * * * * * * * * * * * The content below * * * * * * * * * * * -->\n<!-- * * * * * * * * * * is only a placeholder * * * * * * * * * * -->\n<!-- * * * * * * * * * * and can be replaced. * * * * * * * * * * * -->\n<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->\n<!-- * * * * * * * * * Delete the template below * * * * * * * * * * -->\n<!-- * * * * * * * to get started with your project! * * * * * * * * -->\n<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->\n\n<style>\n  :host {\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n    font-size: 14px;\n    color: #333;\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    margin: 8px 0;\n  }\n\n  p {\n    margin: 0;\n  }\n\n  .spacer {\n    flex: 1;\n  }\n\n  .toolbar {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 60px;\n    display: flex;\n    align-items: center;\n    background-color: #292d84;\n    color: white;\n    font-weight: 600;\n  }\n\n  .toolbar img {\n    margin: 0 16px;\n  }\n\n  .toolbar #twitter-logo {\n    height: 40px;\n    margin: 0 16px;\n  }\n\n  .toolbar #twitter-logo:hover {\n    opacity: 0.8;\n  }\n\n  .content {\n    display: flex;\n    margin: 82px auto 32px;\n    padding: 0 16px;\n    max-width: 960px;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  svg.material-icons {\n    height: 24px;\n    width: auto;\n  }\n\n  svg.material-icons:not(:last-child) {\n    margin-right: 8px;\n  }\n\n  .card svg.material-icons path {\n    fill: #888;\n  }\n\n  .card-container {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    margin-top: 16px;\n  }\n\n  .card {\n    border-radius: 4px;\n    border: 1px solid #eee;\n    background-color: #fafafa;\n    height: 40px;\n    width: 200px;\n    margin: 0 8px 16px;\n    padding: 16px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    transition: all 0.2s ease-in-out;\n    line-height: 24px;\n  }\n\n  .card-container .card:not(:last-child) {\n    margin-right: 0;\n  }\n\n  .card.card-small {\n    height: 16px;\n    width: 168px;\n  }\n\n  .card-container .card:not(.highlight-card) {\n    cursor: pointer;\n  }\n\n  .card-container .card:not(.highlight-card):hover {\n    transform: translateY(-3px);\n    box-shadow: 0 4px 17px rgba(0, 0, 0, 0.35);\n  }\n\n  .card-container .card:not(.highlight-card):hover .material-icons path {\n    fill: rgb(105, 103, 103);\n  }\n\n  .card.highlight-card {\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n    border: none;\n    width: auto;\n    min-width: 30%;\n    position: relative;\n  }\n\n  .card.card.highlight-card span {\n    margin-left: 60px;\n  }\n\n  svg#rocket {\n    width: 80px;\n    position: absolute;\n    left: -10px;\n    top: -24px;\n  }\n\n  svg#rocket-smoke {\n    height: calc(100vh - 95px);\n    position: absolute;\n    top: 10px;\n    right: 180px;\n    z-index: -10;\n  }\n\n  a,\n  a:visited,\n  a:hover {\n    color: #1976d2;\n    text-decoration: none;\n  }\n\n  a:hover {\n    color: #125699;\n  }\n\n  .terminal {\n    position: relative;\n    width: 80%;\n    max-width: 600px;\n    border-radius: 6px;\n    padding-top: 45px;\n    margin-top: 8px;\n    overflow: hidden;\n    background-color: rgb(15, 15, 16);\n  }\n\n  .terminal::before {\n    content: \"\\2022 \\2022 \\2022\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 4px;\n    background: rgb(58, 58, 58);\n    color: #c2c3c4;\n    width: 100%;\n    font-size: 2rem;\n    line-height: 0;\n    padding: 14px 0;\n    text-indent: 4px;\n  }\n\n  .terminal pre {\n    font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, monospace;\n    color: white;\n    padding: 0 1rem 1rem;\n    margin: 0;\n  }\n\n  .circle-link {\n    height: 40px;\n    width: 40px;\n    border-radius: 40px;\n    margin: 8px;\n    background-color: white;\n    border: 1px solid #eeeeee;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n    transition: 1s ease-out;\n  }\n\n  .circle-link:hover {\n    transform: translateY(-0.25rem);\n    box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n  }\n\n  footer {\n    margin-top: 8px;\n    display: flex;\n    align-items: center;\n    line-height: 20px;\n  }\n\n  footer a {\n    display: flex;\n    align-items: center;\n  }\n\n  .github-star-badge {\n    color: #24292e;\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    padding: 3px 10px;\n    border: 1px solid rgba(27, 31, 35, .2);\n    border-radius: 3px;\n    background-image: linear-gradient(-180deg, #fafbfc, #eff3f6 90%);\n    margin-left: 4px;\n    font-weight: 600;\n    font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;\n  }\n\n  .github-star-badge:hover {\n    background-image: linear-gradient(-180deg, #f0f3f6, #e6ebf1 90%);\n    border-color: rgba(27, 31, 35, .35);\n    background-position: -.5em;\n  }\n\n  .github-star-badge .material-icons {\n    height: 16px;\n    width: 16px;\n    margin-right: 4px;\n  }\n\n  svg#clouds {\n    position: fixed;\n    bottom: -160px;\n    left: -230px;\n    z-index: -10;\n    width: 1920px;\n  }\n\n\n  /* Responsive Styles */\n  @media screen and (max-width: 767px) {\n\n    .card-container>*:not(.circle-link),\n    .terminal {\n      width: 100%;\n    }\n\n    .card:not(.highlight-card) {\n      height: 16px;\n      margin: 8px 0;\n    }\n\n    .card.highlight-card span {\n      margin-left: 72px;\n    }\n\n    svg#rocket-smoke {\n      right: 120px;\n      transform: rotate(-5deg);\n    }\n  }\n\n  @media screen and (max-width: 575px) {\n    svg#rocket-smoke {\n      display: none;\n      visibility: hidden;\n    }\n  }\n</style>\n<!-- Toolbar -->\n<div class=\"toolbar\" role=\"banner\">\n</div>\n\n<div class=\"content\" role=\"main\">\n  <!-- <app-push-notification></app-push-notification> -->\n  <!-- <app-pwa-install-promotion></app-pwa-install-promotion> -->\n  <div style=\"display: flex;\">\n    <app-toggle-switch (callback)=\"updateIsMockFlag($event);\" [flagName]=\"'isMock'\"></app-toggle-switch>\n    <app-toggle-switch  style=\"margin-left: 50px;\" [flagName]=\"'isPlatform'\"></app-toggle-switch>\n  </div>\n  <ng-container *ngIf=\"!isMock\">\n    <app-web-authn></app-web-authn>\n  </ng-container>\n  <ng-container *ngIf=\"isMock\">  \n    <app-web-authn-mock></app-web-authn-mock>\n  </ng-container>\n  <router-outlet></router-outlet>","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { ServiceWorkerModule } from '@angular/service-worker';\nimport { environment } from '../environments/environment';\nimport { PwaInstallPromotionComponent } from './pwa-install-promotion/pwa-install-promotion.component';\nimport { HttpClientModule} from '@angular/common/http';\nimport { PushNotificationComponent } from './push-notification/push-notification.component';\nimport { WebAuthnMockComponent } from './components/web-authn-mock/web-authn-mock.component';\nimport { WebAuthnComponent } from './components/web-authn/web-authn.component';\nimport { WebAuthnAPIService } from './services/web-authn-api.service';\nimport { ToggleSwitchComponent } from './components/toggle-switch/toggle-switch.component';\nimport { WebAuthnService } from './services/web-authn-service';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    WebAuthnComponent,\n    PwaInstallPromotionComponent,\n    PushNotificationComponent,\n    WebAuthnMockComponent,\n    ToggleSwitchComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    FormsModule,\n    ReactiveFormsModule,\n    // ServiceWorkerModule.register('ngsw-worker.js', { enabled: environment.production }),\n    ServiceWorkerModule.register('ngsw-worker-modified.js', { enabled: environment.production }),    \n    HttpClientModule\n  ],\n  providers: [WebAuthnAPIService, WebAuthnService],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { MockService } from 'src/app/services/mock.service';\n\n@Component({\n  selector: 'app-toggle-switch',\n  templateUrl: './toggle-switch.component.html',\n  styleUrls: ['./toggle-switch.component.scss']\n})\nexport class ToggleSwitchComponent implements OnInit {\n  @Input()\n  flagName: string;\n  isChecked: boolean;\n  @Output() callback = new EventEmitter<boolean>();\n  constructor(private mockService: MockService) { }\n\n  ngOnInit(): void {\n    this.isChecked = !!JSON.parse(localStorage.getItem(this.flagName));\n  }\n\n\n  onChange() {\n    this.isChecked = !this.isChecked;\n    switch (this.flagName) {\n      case 'isMock':\n        localStorage.setItem(this.flagName, JSON.stringify(this.isChecked));\n        localStorage.removeItem('deviceId');\n        localStorage.removeItem('user_list');\n        this.callback.emit(this.isChecked);\n        this.mockService.resetUser();\n        break;\n      default:\n        localStorage.setItem(this.flagName, JSON.stringify(this.isChecked));\n        break;\n    }\n  }\n\n}\n","<div class=\"toggle-switch-container\">\n    <label class=\"switch\">\n        <input type=\"checkbox\" (change)=\"onChange()\" [checked]=\"isChecked\">\n        <span class=\"slider round\"></span>\n    </label>\n    <div>{{flagName}}</div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { from, Observable, of } from 'rxjs';\nimport { MockService } from 'src/app/services/mock.service';\nimport { User } from 'src/app/models/web-authn.model';\nimport { WebAuthnMockService } from 'src/app/services/web-authn-mock.service';\n\n@Component({\n  selector: 'app-web-authn-mock',\n  templateUrl: './web-authn-mock.component.html',\n  styleUrls: ['./web-authn-mock.component.scss']\n})\nexport class WebAuthnMockComponent implements OnInit {\n  errorMsg: string = \"\";\n  userList: User[] = [];\n  userForm = new FormGroup({\n    email: new FormControl(\"\", [Validators.required, Validators.email]),\n    mobileNumber: new FormControl(\"\", [Validators.required, Validators.pattern(\"^[0-9]{8}$\")]),\n    isEnableBiometricLogin: new FormControl(),\n  });\n  deviceId: string;\n  savedCredentialId: Uint8Array;\n  authenticator: any = {};\n  isSupportBiometricLogin$: Observable<boolean>;\n\n  constructor(\n    private mockService: MockService,\n    private webAuthnMockService: WebAuthnMockService\n  ) { }\n\n  get email(): any {\n    return this.userForm.get('email');\n  }\n\n  get mobileNumber(): any {\n    return this.userForm.get('mobileNumber');\n  }\n\n  get isEnableBiometricLogin(): any {\n    return this.userForm.get('isEnableBiometricLogin')\n  }\n\n  ngOnInit(): void {\n    this.userList = this.mockService.getAllUser();\n    this.deviceId = localStorage.getItem(\"device_id\") || \"\";\n    this.isSupportBiometricLogin$ = this.isSupportBiometricLogin();\n  }\n\n  enableBiometricLogin(user: User): void {\n    if (user.credentials.length === 0) {\n      const isConfirm = confirm(\"Are you sure you want to enable biometric login?\");\n      if (isConfirm) this.webAuthnSignup(user);\n    } else {\n      const isConfirm = confirm(\"Are you sure you want to disable biometric login?\");\n      if (isConfirm) {\n        user.credentials = [];\n        this.mockService.updateUser(user);\n      }\n    }\n  }\n\n  deleteAccount(user: User): void {\n    const isConfirm = confirm(`Are you sure you want to delete this user (${user.email})?`);\n    if (isConfirm) this.mockService.deleteUser(user);\n  }\n\n\n  isSupportBiometricLogin(): Observable<boolean> {\n    if (window.PublicKeyCredential) {\n      return from(new Promise<boolean>((resolve, reject) => {\n        PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()\n          .then(available => {\n            if (available) {\n              console.log(\"Supported.\");\n              resolve(true);\n            } else {\n              console.log(\"WebAuthn supported, Platform Authenticator *not* supported.\");\n              resolve(false);\n            }\n          })\n          .catch(error => {\n            console.log(\"Something went wrong.\");\n            resolve(false);\n          })\n      }));\n    } else {\n      console.log(\"Not supported.\");\n      return of(false);\n    }\n  }\n\n  signup(): void {\n    const user: User = {\n      mobileNumber: this.mobileNumber.value,\n      email: this.email.value,\n      credentials: [],\n      deviceId: this.deviceId,\n    };\n    // Duplicate user create Checking\n    const errorMsgList = this.mockService.validateCreateUser(user);\n    if (errorMsgList.length > 0) {\n      alert(errorMsgList.toString());\n      return;\n    }\n    const userFromDB = this.mockService.createUser(user);\n    this.userList = this.mockService.getAllUser();\n    alert(\"Your Account Has been Created.\");\n    const isEnableBiometricLogin = this.isEnableBiometricLogin.value;\n    if (isEnableBiometricLogin) {\n      alert(\"Enable biometric login...\");\n      this.webAuthnSignup(userFromDB);\n    }\n  }\n\n  private webAuthnSignup(user: User): void {\n    // Ask for WebAuthn Auth method\n    this.webAuthnMockService.signup(user)\n      .then((credential: any) => {\n        console.log(\"---------Credentials Create response---------\");\n        console.log(JSON.stringify(credential));\n        // Call server to validate and save credential\n        // Hardcoded on frontend\n        console.log(\"---------Public key Resonse----------\");\n        console.log(credential);\n        console.log(\"---------Public key Resonse(URLBase64)----------\");\n        const urlbase64 = this.mockService.decodePublicKeyCredentialToBase64String(credential);\n        console.log(JSON.stringify(urlbase64));\n        console.log(\"---------Public key Resonse(decoded)----------\");\n        console.log(JSON.stringify(this.mockService.decodePublicKeyCredential(credential)));\n        const valid = this.mockService.registerCredential(user, credential);\n        if (valid) {\n          alert(\"Registration Successful\");\n        } else {\n          alert(\"Registration Failed\");\n        }\n      })\n      .catch((error) => {\n        this.errorMsg = error;\n        console.log(\"Credentials Create Error: \", error);\n      });\n  }\n\n  signin(user?: User) {\n    let userFromDB: any = { credentials: [] };\n    if (user) {\n      userFromDB = this.mockService.getUserByMobileNumber(user.mobileNumber);\n    } else {\n      userFromDB = this.mockService.getUserByDeviceId(this.deviceId);\n    };\n\n    console.log(\"----------Saved User:----------\");\n    console.log(JSON.stringify(userFromDB));\n    console.log(userFromDB);\n    this.webAuthnMockService.signin(userFromDB)\n      .then((assertion: any) => {\n        alert(\"Authentication Successful\");\n        console.log(\"----------Assertion response----------\");\n        console.log(assertion);\n\n        console.log(\"---------Public key Resonse(URLBase64)----------\");\n        const urlbase64 = this.mockService.decodePublicKeyCredentialToBase64String(assertion);\n        console.log(JSON.stringify(urlbase64));\n\n        // Mock payload\n        const obj = {\n          id: assertion.id,\n          type: assertion.type,\n          response: {\n            authenticatorData: null,\n            clientDataJSON: null,\n            signature: null,\n            userHandle: null,\n          },\n          rawId: null\n        };\n        obj.response.authenticatorData = new Uint8Array(assertion.response.authenticatorData);\n        obj.response.clientDataJSON = new Uint8Array(assertion.response.clientDataJSON);\n        obj.response.signature = new Uint8Array(assertion.response.signature);\n        obj.response.userHandle = new Uint8Array(assertion.response.userHandle);\n        obj.rawId = new Uint8Array(assertion.rawId);\n        console.log(JSON.stringify(obj));\n        this.mockService.decodeAssertion(assertion);\n        // TODO: Call server to validate assertion\n        // When server return ok,login successful else login failed\n      })\n      .catch((error) => {\n        alert(\"Authentication Failed\");\n        this.errorMsg = error;\n        console.log(\"Authentication Failed: \", error);\n      });\n  }\n}","<div class=\"register-form-container\">\n    <h2>\n       Mock Register\n    </h2>\n    <form [formGroup]=\"userForm\">\n        <div class=\"form-field\">\n            <label class=\"form-label\">\n                <h4>Email  \n                    <span [ngClass]=\"'red'\">\n                    *\n                    </span>\n                </h4>\n            </label>\n            <input name=\"email\" formControlName=\"email\" />\n            <div>\n                <label *ngIf=\"email.value && email.invalid\" [ngClass]=\"'red'\"> The Email format is invalid. </label>\n            </div>\n        </div>\n        <div class=\"form-field\">\n            <label class=\"form-label\">\n                <h4>Mobile\n                    <span [ngClass]=\"'red'\">\n                    *\n                    </span>\n                </h4>\n            </label>\n            <input name=\"mobileNumber\" formControlName=\"mobileNumber\" maxlength=\"8\"/>\n            <div>\n                <label *ngIf=\"mobileNumber.value && mobileNumber.invalid\" [ngClass]=\"'red'\">The mobile number is invalid.</label>\n            </div>\n        </div>\n        <div class=\"form-field checkbox\">\n            <input type=\"checkbox\" name=\"isEnableBiometricLogin\" formControlName=\"isEnableBiometricLogin\" />\n            <h4>\n                Enable Biometric Login(TouchID/FaceID)\n            </h4>\n        </div>\n        <div>\n            <button class=\"btn\" (click)=\"signup()\"[disabled]=\"userForm.invalid\">Register</button>\n        </div>\n        <div *ngIf=\"isSupportBiometricLogin$ | async\">\n            <button class=\"btn\">Is Support Biometic Button</button>\n        </div>\n    </form>\n    <ng-container *ngIf=\"errorMsg\">\n        <p class=\"red errorMsg\">\n            Error: {{errorMsg}}\n        </p>\n    </ng-container>\n    <div class=\"line\"></div>\n</div>\n<div class=\"user-list-container\">\n    <h2>User List</h2>\n    <div class=\"line\"></div>\n    <ng-template #biometricIcon>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-fingerprint\"\n            viewBox=\"0 0 16 16\">\n            <path\n                d=\"M8.06 6.5a.5.5 0 0 1 .5.5v.776a11.5 11.5 0 0 1-.552 3.519l-1.331 4.14a.5.5 0 0 1-.952-.305l1.33-4.141a10.5 10.5 0 0 0 .504-3.213V7a.5.5 0 0 1 .5-.5Z\" />\n            <path\n                d=\"M6.06 7a2 2 0 1 1 4 0 .5.5 0 1 1-1 0 1 1 0 1 0-2 0v.332c0 .409-.022.816-.066 1.221A.5.5 0 0 1 6 8.447c.04-.37.06-.742.06-1.115V7Zm3.509 1a.5.5 0 0 1 .487.513 11.5 11.5 0 0 1-.587 3.339l-1.266 3.8a.5.5 0 0 1-.949-.317l1.267-3.8a10.5 10.5 0 0 0 .535-3.048A.5.5 0 0 1 9.569 8Zm-3.356 2.115a.5.5 0 0 1 .33.626L5.24 14.939a.5.5 0 1 1-.955-.296l1.303-4.199a.5.5 0 0 1 .625-.329Z\" />\n            <path\n                d=\"M4.759 5.833A3.501 3.501 0 0 1 11.559 7a.5.5 0 0 1-1 0 2.5 2.5 0 0 0-4.857-.833.5.5 0 1 1-.943-.334Zm.3 1.67a.5.5 0 0 1 .449.546 10.72 10.72 0 0 1-.4 2.031l-1.222 4.072a.5.5 0 1 1-.958-.287L4.15 9.793a9.72 9.72 0 0 0 .363-1.842.5.5 0 0 1 .546-.449Zm6 .647a.5.5 0 0 1 .5.5c0 1.28-.213 2.552-.632 3.762l-1.09 3.145a.5.5 0 0 1-.944-.327l1.089-3.145c.382-1.105.578-2.266.578-3.435a.5.5 0 0 1 .5-.5Z\" />\n            <path\n                d=\"M3.902 4.222a4.996 4.996 0 0 1 5.202-2.113.5.5 0 0 1-.208.979 3.996 3.996 0 0 0-4.163 1.69.5.5 0 0 1-.831-.556Zm6.72-.955a.5.5 0 0 1 .705-.052A4.99 4.99 0 0 1 13.059 7v1.5a.5.5 0 1 1-1 0V7a3.99 3.99 0 0 0-1.386-3.028.5.5 0 0 1-.051-.705ZM3.68 5.842a.5.5 0 0 1 .422.568c-.029.192-.044.39-.044.59 0 .71-.1 1.417-.298 2.1l-1.14 3.923a.5.5 0 1 1-.96-.279L2.8 8.821A6.531 6.531 0 0 0 3.058 7c0-.25.019-.496.054-.736a.5.5 0 0 1 .568-.422Zm8.882 3.66a.5.5 0 0 1 .456.54c-.084 1-.298 1.986-.64 2.934l-.744 2.068a.5.5 0 0 1-.941-.338l.745-2.07a10.51 10.51 0 0 0 .584-2.678.5.5 0 0 1 .54-.456Z\" />\n            <path\n                d=\"M4.81 1.37A6.5 6.5 0 0 1 14.56 7a.5.5 0 1 1-1 0 5.5 5.5 0 0 0-8.25-4.765.5.5 0 0 1-.5-.865Zm-.89 1.257a.5.5 0 0 1 .04.706A5.478 5.478 0 0 0 2.56 7a.5.5 0 0 1-1 0c0-1.664.626-3.184 1.655-4.333a.5.5 0 0 1 .706-.04ZM1.915 8.02a.5.5 0 0 1 .346.616l-.779 2.767a.5.5 0 1 1-.962-.27l.778-2.767a.5.5 0 0 1 .617-.346Zm12.15.481a.5.5 0 0 1 .49.51c-.03 1.499-.161 3.025-.727 4.533l-.07.187a.5.5 0 0 1-.936-.351l.07-.187c.506-1.35.634-2.74.663-4.202a.5.5 0 0 1 .51-.49Z\" />\n        </svg>\n    </ng-template>\n    <ng-container *ngFor=\"let user of userList;\">\n        <div>\n            <p>\n                Email: {{user?.email}}\n            </p>\n            <p>\n                Mobile: {{user?.mobileNumber}}\n            </p>\n        </div>\n        <div>\n            <button class=\"btn delete-btn\" (click)=\"deleteAccount(user);\">Delete Account</button>\n            <ng-container *ngIf=\"user?.credentials?.length === 0\">\n                <button class=\"btn\" (click)=\"enableBiometricLogin(user);\">Enable Biometric\n                    <ng-container *ngTemplateOutlet=\"biometricIcon;\"></ng-container>\n                </button>\n            </ng-container>\n            <ng-container *ngIf=\"user?.credentials?.length > 0\">\n                <button class=\"btn delete-btn\" (click)=\"enableBiometricLogin(user);\">Disable Biometric\n                    <ng-container *ngTemplateOutlet=\"biometricIcon;\"></ng-container>\n                </button>\n            </ng-container>\n            <ng-container *ngIf=\"user?.credentials?.length > 0\">\n                <button class=\"btn\" (click)=\"signin(user);\">Login with Biometric\n                </button>\n            </ng-container>\n        </div>\n        <div class=\"line\"></div>\n    </ng-container>\n</div>","export const registerPayload: any = {\n    \"rawId\": \"xDMtpbMBPngyDCPiT-qoUl8BUiQ\",\n    \"response\": {\n        \"attestationObject\": \"o2NmbXRlYXBwbGVnYXR0U3RtdKFjeDVjglkCRjCCAkIwggHJoAMCAQICBgF-Qa8okzAKBggqhkjOPQQDAjBIMRwwGgYDVQQDDBNBcHBsZSBXZWJBdXRobiBDQSAxMRMwEQYDVQQKDApBcHBsZSBJbmMuMRMwEQYDVQQIDApDYWxpZm9ybmlhMB4XDTIyMDEwOTAxNTE0NVoXDTIyMDExMjAxNTE0NVowgZExSTBHBgNVBAMMQGZiNGU1ZmI2YTFmYThjYmU1MThkNGY3MzlkNjIyOGZmYTQ0OTE0ZTQ2NzdiNDI3ODc3MjFjM2U0MjlkNzYxZjUxGjAYBgNVBAsMEUFBQSBDZXJ0aWZpY2F0aW9uMRMwEQYDVQQKDApBcHBsZSBJbmMuMRMwEQYDVQQIDApDYWxpZm9ybmlhMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEsvIXWBHLBLPw3rh7xZ9ooLVuyjocq7w1lMU4bFFcUyHvIAgafvV1vNdX9NDBcslxT2gFr-QdKA5CEPD2oHKIA6NVMFMwDAYDVR0TAQH_BAIwADAOBgNVHQ8BAf8EBAMCBPAwMwYJKoZIhvdjZAgCBCYwJKEiBCD0xSGpdDiTGDVySB8oM8gMRUjv2qAx1YCHw8jsYFN4-zAKBggqhkjOPQQDAgNnADBkAjBGizCO2C_3Wno7NeQ0iezkY58b4kedg_S9J4t-napU3V0AfoPvjyQDGyTf6rarLOECMBf1nYZEl6eDHEHEg7G1EMJTaAFCfQd6MoohVxxokMj88eiUrsKW971LaY7CtKOF9VkCODCCAjQwggG6oAMCAQICEFYlU5XHp_tA6-Io2CYIU7YwCgYIKoZIzj0EAwMwSzEfMB0GA1UEAwwWQXBwbGUgV2ViQXV0aG4gUm9vdCBDQTETMBEGA1UECgwKQXBwbGUgSW5jLjETMBEGA1UECAwKQ2FsaWZvcm5pYTAeFw0yMDAzMTgxODM4MDFaFw0zMDAzMTMwMDAwMDBaMEgxHDAaBgNVBAMME0FwcGxlIFdlYkF1dGhuIENBIDExEzARBgNVBAoMCkFwcGxlIEluYy4xEzARBgNVBAgMCkNhbGlmb3JuaWEwdjAQBgcqhkjOPQIBBgUrgQQAIgNiAASDLocvJhSRgQIlufX81rtjeLX1Xz_LBFvHNZk0df1UkETfm_4ZIRdlxpod2gULONRQg0AaQ0-yTREtVsPhz7_LmJH-wGlggb75bLx3yI3dr0alruHdUVta-quTvpwLJpGjZjBkMBIGA1UdEwEB_wQIMAYBAf8CAQAwHwYDVR0jBBgwFoAUJtdk2cV4wlpn0afeaxLQG2PxxtcwHQYDVR0OBBYEFOuugsT_oaxbUdTPJGEFAL5jvXeIMA4GA1UdDwEB_wQEAwIBBjAKBggqhkjOPQQDAwNoADBlAjEA3YsaNIGl-tnbtOdle4QeFEwnt1uHakGGwrFHV1Azcifv5VRFfvZIlQxjLlxIPnDBAjAsimBE3CAfz-Wbw00pMMFIeFHZYO1qdfHrSsq-OM0luJfQyAW-8Mf3iwelccboDgdoYXV0aERhdGFYmGQv8P1c0tEeoxmgZtShAxpeZTBBH1GgI0qVyzfSZnllRQAAAADySo5w0NP4LCk3MlI8xN5aABTEMy2lswE-eDIMI-JP6qhSXwFSJKUBAgMmIAEhWCCy8hdYEcsEs_DeuHvFn2igtW7KOhyrvDWUxThsUVxTISJYIO8gCBp-9XW811f00MFyyXFPaAWv5B0oDkIQ8PagcogD\",\n        \"clientDataJSON\": \"eyJ0eXBlIjoid2ViYXV0aG4uY3JlYXRlIiwiY2hhbGxlbmdlIjoiWTJObVpHRTROVGN0T0RZM09DMDBZV1JsTFdFeVlUY3RZMlEzTTJReFltUmlNVFk0Iiwib3JpZ2luIjoiaHR0cHM6Ly9taDEyMDg4LmdpdGh1Yi5pbyJ9\"\n    },\n    \"getClientExtensionResults\": {},\n    \"id\": \"xDMtpbMBPngyDCPiT-qoUl8BUiQ\",\n    \"type\": \"public-key\"\n}\n\nexport const loginPayload: any = {\n    \"rawId\": \"xDMtpbMBPngyDCPiT-qoUl8BUiQ\",\n    \"response\": {\n        \"authenticatorData\": \"ZC_w_VzS0R6jGaBm1KEDGl5lMEEfUaAjSpXLN9JmeWUFAAAAAA\",\n        \"signature\": \"MEUCIQDZ9_4HoURKbFosiR4AbptFt9LHTMB8hKLt2M-ecLodggIgD5w4yPk17jIlIEIBD5OMCICnVdT9reTaq73jfMyyaZ4\",\n        \"userHandle\": \"MTExMTExMTE\",\n        \"clientDataJSON\": \"eyJ0eXBlIjoid2ViYXV0aG4uZ2V0IiwiY2hhbGxlbmdlIjoiTm1RMU4yRmpZVFl0T1dKbE55MDBaRGt4TFdJd01ESXRNRFExTW1JellXTXpNbUkxIiwib3JpZ2luIjoiaHR0cHM6Ly9taDEyMDg4LmdpdGh1Yi5pbyJ9\"\n    },\n    \"getClientExtensionResults\": {},\n    \"id\": \"xDMtpbMBPngyDCPiT-qoUl8BUiQ\",\n    \"type\": \"public-key\"\n}\n\n\n// export const testingData = { \n//     \"deviceId\": \"b713af70-9575-49f0-8833-be26b1cadb0b\", \n//     \"attestation\": \"o2NmbXRkbm9uZWdhdHRTdG10oGhhdXRoRGF0YVikSZYN5YgOjGh0NBcPZHZgW4_krrmihjLHmVzzuoMdl2NFAAAAAQAAAAAAAAAAAAAAAAAAAAAAIHWLxBd6yM9-3h9REI9J6gX3o_MDEZU_5jM1m2o275iZpQECAyYgASFYICq9eCvRj5HWyi72tOk4LMtXrdqhwoJUgmFOG25GW0ITIlggyQtZ_IhU-TkjaUI4MkIDPKmk_gxFwEVEEkvskoLJWSo\", \n//     \"credentialId\": \"dYvEF3rIz37eH1EQj0nqBfej8wMRlT_mMzWbajbvmJk\", \n//     \"clientDataJSON\": \"eyJ0eXBlIjoid2ViYXV0aG4uY3JlYXRlIiwiY2hhbGxlbmdlIjoiWXpGa05XUTRaR0V0WmpCbFl5MDBaakF6TFRnMFlqUXRaRGc1WlRreFlqZzJZemRoIiwib3JpZ2luIjoiaHR0cDovL2xvY2FsaG9zdDo0MjAwIiwiY3Jvc3NPcmlnaW4iOmZhbHNlfQ\" \n// };","import { identifierModuleUrl, ThrowStmt } from '@angular/compiler';\nimport { Component, OnInit, ɵɵsetComponentScope } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { from, observable, Observable, of, pipe } from 'rxjs';\nimport { catchError, map, subscribeOn, switchMap, take, tap } from 'rxjs/operators';\nimport { User } from 'src/app/models/web-authn.model';\nimport { MockService } from 'src/app/services/mock.service';\nimport { WebAuthnService } from 'src/app/services/web-authn-service';\nimport { WebAuthnAPIService } from 'src/app/services/web-authn-api.service'\n\n@Component({\n  selector: 'app-web-authn',\n  templateUrl: './web-authn.component.html',\n  styleUrls: ['./web-authn.component.scss']\n})\nexport class WebAuthnComponent implements OnInit {\n  errorMsg: string = \"\";\n  userList: User[] = [];\n  userForm = new FormGroup({\n    email: new FormControl(\"\", [Validators.required, Validators.email]),\n    mobileNumber: new FormControl(\"\", [Validators.required, Validators.pattern(\"^[0-9]{8}$\")]),\n    isEnableBiometricLogin: new FormControl(),\n  });\n  deviceId: string;\n  savedCredentialId: Uint8Array;\n\n  flag$: Observable<boolean>;\n  authenticator: any = {};\n  constructor(\n    private mockService: MockService,\n    private webAuthnService: WebAuthnService,\n    private webAuthnAPIService: WebAuthnAPIService,\n  ) { }\n\n  ngOnInit(): void {\n    this.userList = this.mockService.getAllUser();\n    this.deviceId = localStorage.getItem(\"device_id\") || \"\";\n  }\n\n  get email(): any {\n    return this.userForm.get('email');\n  }\n\n  get mobileNumber(): any {\n    return this.userForm.get('mobileNumber');\n  }\n\n  get isEnableBiometricLogin(): any {\n    return this.userForm.get('isEnableBiometricLogin')\n  }\n\n  signup(): void {\n    const user: User = {\n      mobileNumber: this.userForm.get('mobileNumber').value,\n      email: this.userForm.get('email').value,\n      credentials: [],\n      deviceId: this.deviceId,\n    };\n    const errorMsgList = this.mockService.validateCreateUser(user);\n    if (errorMsgList.length > 0) {\n      alert(errorMsgList.toString());\n      return;\n    }\n    const userFromDB = this.mockService.createUser(user);\n    this.userList = this.mockService.getAllUser();\n    alert(\"Your Account Has been Created.\");\n    const isEnableBiometricLogin = this.userForm.get('isEnableBiometricLogin').value;\n    if (isEnableBiometricLogin) {\n      alert(\"Enable biometric login...\");\n      this.webAuthnService.signupFlow(userFromDB).subscribe(response => {\n        console.log(response);\n        userFromDB.credentials = [{ credentialIdString: response.credentialIdString }]\n        userFromDB.authenticatorString = response.authenticatorString;\n        this.mockService.updateUser(userFromDB);\n        alert(\"Registration Successful\");\n      })\n    }\n  }\n\n  enableBiometricLogin(user: User): void {\n    if (user.credentials.length === 0) {\n      const isConfirm = confirm(\"Are you sure you want to enable biometric login?\");\n      if (isConfirm) this.webAuthnService.signupFlow(user);\n    } else {\n      const isConfirm = confirm(\"Are you sure you want to disable biometric login?\");\n      if (isConfirm) {\n        user.credentials = [];\n        this.mockService.updateUser(user);\n      }\n    }\n  }\n\n  deleteAccount(user: User): void {\n    const isConfirm = confirm(`Are you sure you want to delete this user (${user.email})?`);\n    if (isConfirm) this.mockService.deleteUser(user);\n  }\n\n  signin(user?: User) {\n    let userFromDB: any = { credentials: [] };\n    if (user) {\n      userFromDB = this.mockService.getUserByMobileNumber(user.mobileNumber);\n    } else {\n      userFromDB = this.mockService.getUserByDeviceId(this.deviceId);\n    };\n    console.log(\"----------Saved User:----------\");\n    console.log(JSON.stringify(userFromDB));\n    this.webAuthnService.signinFlow(userFromDB).subscribe(response => {\n      if(response == 'success') {\n        alert(\"Login Successful\");\n      }\n      console.log(response);\n    })\n  }\n\n\n  // webAuthnRegister() {\n  //   this.testService.webAuthnRegister().subscribe(\n  //     response => {\n  //       console.log(response);\n  //       this.authenticator = response;\n  //     },\n  //     error => {\n  //       console.log(error);\n  //     });\n  // }\n\n  // webAuthnLogin() {\n  //   this.testService.webAuthnLogin(this.authenticator).subscribe(\n  //     response => {\n  //       console.log(response)\n  //     },\n  //     error => {\n  //       console.log(error);\n  //     });\n  // }\n\n  // signupFlow() {\n  //   // 1. Get challenge\n  //   // 2. Call webauthn lib to register new public key\n  //   // 3. Pass credential to server to validate and save\n  //   const user = { mobileNumber: \"11111111\", email: \"tommy@gmail.com\" };\n  //   this.mockV2Service.getChallenge().pipe(\n  //     switchMap(challenge => {\n  //       console.log(challenge);\n  //       return from(new Promise((resolve, reject) => {\n  //         this.mockV2Service.webAuthnSignup(user, challenge)\n  //           .then((credential: any) => {\n  //             const credentialBase64Url = this.mockV2Service.publicKeyCredentialToBase64Url(credential);\n  //             this.savedCredentialId = this.mockV2Service.registerCredential(credential);\n  //             resolve(credentialBase64Url)\n  //           })\n  //           .catch(error => reject(error))\n  //       }))\n  //     }),\n  //     switchMap(credentialBase64Url => {\n  //       return this.mockV2Service.signup(credentialBase64Url);\n  //     }),\n  //     catchError(error => of(`Error: ${error}`))\n  //   ).subscribe(data => {\n  //     console.log(data);\n  //   });\n  // }\n\n  // signupFlowV2() {\n  //   const user = { mobileNumber: \"11111111\", email: \"tommy@gmail.com\" };\n  //   this.mockV2Service.signupFlow(user).subscribe(data => { console.log(data) });\n  // }\n\n\n  // signinFlowV2() {\n  //   const user = { mobileNumber: \"11111111\", email: \"tommy@gmail.com\", credentials: [{ credentialId: this.savedCredentialId }] };\n  //   this.mockV2Service.signinFlow(user).subscribe(data => { console.log(data) });\n  // }\n\n\n  // signinFlow() {\n  //   // 1. Get challenge and credential Id\n  //   // 2. Call webauthn lib to validate credential Id and assertion\n  //   // 3. Pass assertion to server to validate and login\n  //   const user = { mobileNumber: \"11111111\", email: \"tommy@gmail.com\", credentials: [{ credentialId: this.savedCredentialId }] };\n  //   if (this.savedCredentialId) {\n  //     this.mockV2Service.getChallenge().pipe(\n  //       switchMap(challenge => {\n  //         return from(new Promise((resolve, reject) => {\n  //           this.mockV2Service.webAuthnSignin(user, challenge)\n  //             .then(assertion => {\n  //               const credentialBase64Url = this.mockV2Service.publicKeyCredentialToBase64Url(assertion);\n  //               resolve(credentialBase64Url);\n  //             })\n  //             .catch(error => reject(error))\n  //         }))\n  //       }),\n  //       switchMap(credentialBase64Url => {\n  //         return this.mockV2Service.signin(credentialBase64Url);\n  //       }),\n  //       catchError(error => of(`Error: ${error}`))\n  //     ).subscribe(resp => {\n  //       console.log(resp);\n  //     });\n  //   }\n  // }\n\n  isSupportBiometricLogin(): Observable<boolean> {\n    if (window.PublicKeyCredential) {\n      return from(new Promise<boolean>((resolve, reject) => {\n        PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()\n          .then(available => {\n            if (available) {\n              // console.log(\"Supported.\");\n              resolve(true);\n            } else {\n              // console.log(\"WebAuthn supported, Platform Authenticator *not* supported.\");\n              resolve(false);\n            }\n          })\n          .catch(error => {\n            // console.log(\"Something went wrong.\");\n            resolve(false);\n          })\n      }));\n    } else {\n      // console.log(\"Not supported.\");\n      return of(false);\n    }\n  }\n}","<!-- <button class=\"btn\" (click)=\"webAuthnRegister();\">WebAuthnRegister(test)</button> -->\n<!-- <button class=\"btn\" (click)=\"webAuthnLogin();\">WebAuthnLogin(test)</button> -->\n<!-- <button class=\"btn\" (click)=\"signupFlowV2();\">Register(mock)</button> -->\n<!-- <button class=\"btn\" (click)=\"signinFlow();\">Login(mock)</button> -->\n<div class=\"register-form-container\">\n    <h2>\n        Register\n    </h2>\n    <form [formGroup]=\"userForm\">\n        <div class=\"form-field\">\n            <label class=\"form-label\">\n                <h4>Email  \n                    <span [ngClass]=\"'red'\">\n                    *\n                    </span>\n                </h4>\n            </label>\n            <input name=\"email\" formControlName=\"email\" />\n            <div>\n                <label *ngIf=\"email.value && email.invalid\" [ngClass]=\"'red'\"> The Email format is invalid. </label>\n            </div>\n        </div>\n        <div class=\"form-field\">\n            <label class=\"form-label\">\n                <h4>Mobile\n                    <span [ngClass]=\"'red'\">\n                    *\n                    </span>\n                </h4>\n            </label>\n            <input name=\"mobileNumber\" formControlName=\"mobileNumber\" maxlength=\"8\"/>\n            <div>\n                <label *ngIf=\"mobileNumber.value && mobileNumber.invalid\" [ngClass]=\"'red'\">The mobile number is invalid.</label>\n            </div>\n        </div>\n        <div class=\"form-field checkbox\">\n            <input type=\"checkbox\" name=\"isEnableBiometricLogin\" formControlName=\"isEnableBiometricLogin\" />\n            <h4>\n                Enable Biometric Login(TouchID/FaceID)\n            </h4>\n        </div>\n        <div>\n            <button class=\"btn\" (click)=\"signup()\"[disabled]=\"userForm.invalid\">Register</button>\n        </div>\n    </form>\n    <ng-container *ngIf=\"errorMsg\">\n        <p class=\"red errorMsg\">\n            Error: {{errorMsg}}\n        </p>\n    </ng-container>\n    <div class=\"line\"></div>\n</div>\n<div class=\"user-list-container\">\n    <h2>User List</h2>\n    <div class=\"line\"></div>\n    <ng-template #biometricIcon>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-fingerprint\"\n            viewBox=\"0 0 16 16\">\n            <path\n                d=\"M8.06 6.5a.5.5 0 0 1 .5.5v.776a11.5 11.5 0 0 1-.552 3.519l-1.331 4.14a.5.5 0 0 1-.952-.305l1.33-4.141a10.5 10.5 0 0 0 .504-3.213V7a.5.5 0 0 1 .5-.5Z\" />\n            <path\n                d=\"M6.06 7a2 2 0 1 1 4 0 .5.5 0 1 1-1 0 1 1 0 1 0-2 0v.332c0 .409-.022.816-.066 1.221A.5.5 0 0 1 6 8.447c.04-.37.06-.742.06-1.115V7Zm3.509 1a.5.5 0 0 1 .487.513 11.5 11.5 0 0 1-.587 3.339l-1.266 3.8a.5.5 0 0 1-.949-.317l1.267-3.8a10.5 10.5 0 0 0 .535-3.048A.5.5 0 0 1 9.569 8Zm-3.356 2.115a.5.5 0 0 1 .33.626L5.24 14.939a.5.5 0 1 1-.955-.296l1.303-4.199a.5.5 0 0 1 .625-.329Z\" />\n            <path\n                d=\"M4.759 5.833A3.501 3.501 0 0 1 11.559 7a.5.5 0 0 1-1 0 2.5 2.5 0 0 0-4.857-.833.5.5 0 1 1-.943-.334Zm.3 1.67a.5.5 0 0 1 .449.546 10.72 10.72 0 0 1-.4 2.031l-1.222 4.072a.5.5 0 1 1-.958-.287L4.15 9.793a9.72 9.72 0 0 0 .363-1.842.5.5 0 0 1 .546-.449Zm6 .647a.5.5 0 0 1 .5.5c0 1.28-.213 2.552-.632 3.762l-1.09 3.145a.5.5 0 0 1-.944-.327l1.089-3.145c.382-1.105.578-2.266.578-3.435a.5.5 0 0 1 .5-.5Z\" />\n            <path\n                d=\"M3.902 4.222a4.996 4.996 0 0 1 5.202-2.113.5.5 0 0 1-.208.979 3.996 3.996 0 0 0-4.163 1.69.5.5 0 0 1-.831-.556Zm6.72-.955a.5.5 0 0 1 .705-.052A4.99 4.99 0 0 1 13.059 7v1.5a.5.5 0 1 1-1 0V7a3.99 3.99 0 0 0-1.386-3.028.5.5 0 0 1-.051-.705ZM3.68 5.842a.5.5 0 0 1 .422.568c-.029.192-.044.39-.044.59 0 .71-.1 1.417-.298 2.1l-1.14 3.923a.5.5 0 1 1-.96-.279L2.8 8.821A6.531 6.531 0 0 0 3.058 7c0-.25.019-.496.054-.736a.5.5 0 0 1 .568-.422Zm8.882 3.66a.5.5 0 0 1 .456.54c-.084 1-.298 1.986-.64 2.934l-.744 2.068a.5.5 0 0 1-.941-.338l.745-2.07a10.51 10.51 0 0 0 .584-2.678.5.5 0 0 1 .54-.456Z\" />\n            <path\n                d=\"M4.81 1.37A6.5 6.5 0 0 1 14.56 7a.5.5 0 1 1-1 0 5.5 5.5 0 0 0-8.25-4.765.5.5 0 0 1-.5-.865Zm-.89 1.257a.5.5 0 0 1 .04.706A5.478 5.478 0 0 0 2.56 7a.5.5 0 0 1-1 0c0-1.664.626-3.184 1.655-4.333a.5.5 0 0 1 .706-.04ZM1.915 8.02a.5.5 0 0 1 .346.616l-.779 2.767a.5.5 0 1 1-.962-.27l.778-2.767a.5.5 0 0 1 .617-.346Zm12.15.481a.5.5 0 0 1 .49.51c-.03 1.499-.161 3.025-.727 4.533l-.07.187a.5.5 0 0 1-.936-.351l.07-.187c.506-1.35.634-2.74.663-4.202a.5.5 0 0 1 .51-.49Z\" />\n        </svg>\n    </ng-template>\n    <ng-container *ngFor=\"let user of userList;\">\n        <div>\n            <p>\n                Email: {{user?.email}}\n            </p>\n            <p>\n                Mobile: {{user?.mobileNumber}}\n            </p>\n        </div>\n        <div>\n            <button class=\"btn delete-btn\" (click)=\"deleteAccount(user);\">Delete Account</button>\n            <ng-container *ngIf=\"user?.credentials?.length === 0\">\n                <button class=\"btn\" (click)=\"enableBiometricLogin(user);\">Enable Biometric\n                    <ng-container *ngTemplateOutlet=\"biometricIcon;\"></ng-container>\n                </button>\n            </ng-container>\n            <ng-container *ngIf=\"user?.credentials?.length > 0\">\n                <button class=\"btn delete-btn\" (click)=\"enableBiometricLogin(user);\">Disable Biometric\n                    <ng-container *ngTemplateOutlet=\"biometricIcon;\"></ng-container>\n                </button>\n            </ng-container>\n            <ng-container *ngIf=\"user?.credentials?.length > 0\">\n                <button class=\"btn\" (click)=\"signin(user);\">Login with Biometric\n                </button>\n            </ng-container>\n        </div>\n        <div class=\"line\"></div>\n    </ng-container>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { FireBaseService } from './service/firebase.service';\n\n@Component({\n  selector: 'app-push-notification',\n  templateUrl: './push-notification.component.html',\n  styleUrls: ['./push-notification.component.scss']\n})\nexport class PushNotificationComponent implements OnInit {\n\n  constructor() { }\n  ngOnInit(): void {\n  }\n\n  requestPermission() {\n    if ('PushManager' in window) {\n      Notification.requestPermission(function (status) {\n        console.log('Notification permission status:', status);\n      });\n      console.log('Push messaging is supported');\n    } else {\n      console.error('Push messaging is not supported');\n    }\n  }\n\n}\n","<div class=\"push-notification-container\">\n  <button class=\"btn\" (click)=\"requestPermission()\">Show Notifications</button>\n</div>","import { HttpClient } from '@angular/common/http';\nimport { Component, HostListener, OnInit } from '@angular/core';\nimport { GoogleAnalyticsService } from './service/google-analytics-service';\n\n@Component({\n  selector: 'app-pwa-install-promotion',\n  templateUrl: './pwa-install-promotion.component.html',\n  styleUrls: ['./pwa-install-promotion.component.scss']\n})\nexport class PwaInstallPromotionComponent implements OnInit {\n  deferredPrompt: any;\n  showPromotion: boolean = false;\n  showIOSPromotion: boolean = true;\n  device: string = \"\";\n  installStatus: string = \"\";\n\n  products = [];\n  constructor(private http: HttpClient, private _$gaService: GoogleAnalyticsService) { }\n\n  getTestingData() {\n    const url = `https://mh12088.github.io/tommy.lai.github.io/assets/data.json`;\n    return this.http.get<any>(url);\n  };\n\n  event() {\n    // event name, event category, event label, event value.\n    this._$gaService.logEvent('pwa_call_api', 'ddd', 'eee','fff');\n  }\n\n\n  ngOnInit(): void {\n    this.detectDevice();\n    const displayMode = this.getPWADisplayMode();\n    console.log(displayMode);\n    if (displayMode === \"standalone\") {\n      this.installStatus = \"Installed\";\n    } else {\n      this.installStatus = \"Not installed\";\n    }\n    this.getTestingData().subscribe((data: any) => {\n      this.products = data;\n      console.log(data);\n    });\n  }\n\n  detectDevice() {\n    // Detects device type.\n    let device: string = \"\";\n    const userAgent = window.navigator.userAgent.toLowerCase();\n    if (userAgent.match(/iphone|ipad|ipod/i)) {\n      device = \"ios\";\n    } else if (userAgent.match(/Android/i)) {\n      device = \"android\";\n    } else {\n      device = \"other\";\n    }\n    this.device = device;\n  }\n\n  getPWADisplayMode() {\n    // use this to check if the user is already using your PWA - no need to prompt if in standalone\n    const isStandalone = window.matchMedia('(display-mode: standalone)').matches;\n    if (document.referrer.startsWith('android-app://')) {\n      return 'twa';\n    } else if ((window?.navigator as any)?.standalone || isStandalone) {\n      return 'standalone';\n    }\n    return 'browser';\n  }\n\n  hideIOSInstallPromotion() {\n    this.showIOSPromotion = false;\n  }\n\n  // There function and  \"Beforeinstallprompt\" event is only support android\n  showInstallPromotion() {\n    this.showPromotion = true;\n  }\n\n  hideInstallPromotion() {\n    this.showPromotion = false;\n  }\n\n  @HostListener('window:beforeinstallprompt', ['$event'])\n  onbeforeinstallprompt(e) {\n    // Prevent the mini-infobar from appearing on mobile\n    e.preventDefault();\n    // Stash the event so it can be triggered later.\n    this.deferredPrompt = e;\n    // Update UI notify the user they can install the PWA\n    this.showInstallPromotion();\n    // Optionally, send analytics event that PWA install promo was shown.\n    console.log(`'beforeinstallprompt' event was fired.`);\n  }\n\n  addToHomeScreen() {\n    // Hide the app provided install promotion\n    this.hideInstallPromotion();\n    // Show the install prompt\n    this.deferredPrompt.prompt();\n    // Wait for the user to respond to the prompt\n    this.deferredPrompt.userChoice\n      .then((choiceResult) => {\n        if (choiceResult.outcome === 'accepted') {\n          console.log('User accepted the A2HS prompt');\n        } else {\n          console.log('User dismissed the A2HS prompt');\n          this.hideInstallPromotion();\n        }\n        this.deferredPrompt = null;\n      });\n  }\n}\n","<h3>\n    Device:\n    {{ device}}\n</h3>\n<h3>\n    Status:\n    {{installStatus}}\n</h3>\n<a href=\"http://example.com/\" target=\"_blank\" class=\"app-logo\" (click)=\"event();\">test event</a>\n<ng-container *ngIf=\"installStatus !== 'Installed'\">\n    <ng-container [ngSwitch]=\"device\">\n        <ng-container *ngSwitchCase=\"'android'\">\n            <div class=\"pwa-install-promotion-container android\" *ngIf=\"showPromotion\">\n                <p class=\"title\">Install web app</p>\n                <div class=\"buttons\">\n                    <button (click)=\"addToHomeScreen()\" class=\"btn\">Install</button>\n                    <span class=\"close-btn\" (click)=\"hideInstallPromotion();\">Not now</span>\n                </div>\n            </div>\n        </ng-container>\n        <ng-container *ngSwitchCase=\"'ios'\">\n            <div class=\"pwa-install-promotion-container ios\" *ngIf=\"showIOSPromotion\">\n                <span class=\"close-btn\" (click)=\"hideIOSInstallPromotion();\">X</span>\n                <p class=\"desc\">Install this webapp on your desktop: tap\n                    <br><img\n                        src=\"https://user-images.githubusercontent.com/24765669/66438400-d71d6800-ea2c-11e9-9de3-f9096c793f1b.png\"\n                        width=\"20\" height=\"20\" /> and then Add to homescreen\n                </p>\n                <div class=\"arrow-box\">\n                    &nbsp;\n                </div>\n            </div>\n        </ng-container>\n    </ng-container>\n</ng-container>","import { Injectable } from '@angular/core';\nimport { Router, RouterEvent, NavigationEnd } from '@angular/router';\nimport { filter } from 'rxjs/operators';\n\ndeclare var gtag: any;\n@Injectable({\n    providedIn: 'root'\n})\nexport class GoogleAnalyticsService {\n\n    constructor(private _router: Router) {\n        this._router.events.pipe(\n            filter(event => event instanceof NavigationEnd)\n        ).subscribe((e: NavigationEnd) => {\n            gtag('js', new Date());\n            gtag('config', 'G-TFJ9H2W5Q3');\n            // gtag('get', 'G-TFJ9H2W5Q3', 'client_id', (clientID) => {\n            //     console.log(\"test: \", clientID);\n            // });\n        });\n    }\n\n    init() {\n        // Global site tag (gtag.js) - Google Analytics\n        const script = document.createElement('script');\n        script.src = 'https://www.googletagmanager.com/gtag/js?id=G-TFJ9H2W5Q3';\n        script.async = true;\n        document.getElementsByTagName('head')[0].appendChild(script);\n        const gtagEl = document.createElement('script');\n        const gtagBody = document.createTextNode(`\n        window.dataLayer = window.dataLayer || [];\n        function gtag() { dataLayer.push(arguments); }\n        `);\n        gtagEl.appendChild(gtagBody);\n        document.body.appendChild(gtagEl);\n    }\n\n    logEvent(event, category, label, value) {\n        gtag('event', event, {\n            event_category: category,\n            event_label: label,\n            value: value\n        });\n        console.log('gtag event captured...');\n    }\n}","import { Injectable } from '@angular/core';\nimport { User, ClientDataObj, DecodedAttestionObj, DecodedPublicKeyCredential } from '../models/web-authn.model';\nimport * as CBOR from '../utils/cbor';\nimport * as base64js from '../utils/base64';\nimport * as uuid from 'uuid';\n@Injectable({\n    providedIn: 'root'\n})\nexport class MockService {\n    userList: User[] = localStorage.getItem(\"user_list\") ? JSON.parse(localStorage.getItem(\"user_list\")) : [];\n\n    constructor() { }\n\n    getUserByDeviceId(deviceId: string) {\n        return this.userList.find(user => user.deviceId === deviceId);\n    }\n\n    genUUID() {\n        return uuid.v4();\n    }\n\n    // Should generate from server\n    getChallenge() {\n        const challenge = new Uint8Array(32);\n        return window.crypto.getRandomValues(challenge);\n    }\n\n    getAllUser() {\n        return this.userList;\n    }\n\n    validateCreateUser(user: User) {\n        const errorMsgList: string[] = [];\n        if (this.getUserByEmail(user.email)) {\n            errorMsgList.push(\"Email is already registered\");\n        }\n        if (this.getUserByMobileNumber(user.mobileNumber)) {\n            errorMsgList.push(\"Mobile Number is already registered\");\n        }\n        return errorMsgList;\n    }\n\n    saveChanges() {\n        localStorage.setItem(\"user_list\", JSON.stringify(this.userList));\n    }\n\n    createUser(user: User) {\n        this.userList.push(user);\n        this.saveChanges();\n        return this.getUserByMobileNumber(user.mobileNumber);\n    }\n\n    deleteUser(user: User) {\n        this.userList.splice(this.getUserIndex(user), 1);\n        this.saveChanges();\n    }\n\n    resetUser() {\n        this.userList = [];\n        this.saveChanges();\n    }\n\n    getUserIndex(user: User) {\n        return this.userList.findIndex(item => item.mobileNumber === user.mobileNumber);\n    }\n\n    getUserByMobileNumber(mobileNumber: string) {\n        return this.userList.find(user => user.mobileNumber === mobileNumber);\n    }\n\n    getUserByEmail(email: string) {\n        return this.userList.find(user => user.email === email);\n    }\n\n\n    updateUser(user: User) {\n        const userIndex = this.getUserIndex(user);\n        this.userList[userIndex] = user;\n        this.saveChanges();\n        return this.userList[userIndex];\n    }\n\n    base64urlEncode(arraybuffer) {\n        let chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\";\n        // Use a lookup table to find the index.\n        let lookup = new Uint8Array(256);\n        for (let i = 0; i < chars.length; i++) {\n            lookup[chars.charCodeAt(i)] = i;\n        }\n        let bytes = new Uint8Array(arraybuffer),\n            i, len = bytes.length, base64 = \"\";\n\n        for (i = 0; i < len; i += 3) {\n            base64 += chars[bytes[i] >> 2];\n            base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n            base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n            base64 += chars[bytes[i + 2] & 63];\n        }\n\n        if ((len % 3) === 2) {\n            base64 = base64.substring(0, base64.length - 1);\n        } else if (len % 3 === 1) {\n            base64 = base64.substring(0, base64.length - 2);\n        }\n\n        return base64;\n    }\n\n    base64urlDecode(base64) {\n        let chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\";\n        // Use a lookup table to find the index.\n        var lookup = new Uint8Array(256);\n        for (let i = 0; i < chars.length; i++) {\n            lookup[chars.charCodeAt(i)] = i;\n        }\n        let bufferLength = base64.length * 0.75,\n            len = base64.length, i, p = 0,\n            encoded1, encoded2, encoded3, encoded4;\n\n        let arraybuffer = new ArrayBuffer(bufferLength),\n            bytes = new Uint8Array(arraybuffer);\n\n        for (i = 0; i < len; i += 4) {\n            encoded1 = lookup[base64.charCodeAt(i)];\n            encoded2 = lookup[base64.charCodeAt(i + 1)];\n            encoded3 = lookup[base64.charCodeAt(i + 2)];\n            encoded4 = lookup[base64.charCodeAt(i + 3)];\n\n            bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n            bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n            bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n        }\n\n        return arraybuffer;\n    };\n\n    decodePublicKeyCredentialToBase64String(pubKeyCred) {\n        if (pubKeyCred instanceof ArrayBuffer) {\n            return this.base64urlEncode(pubKeyCred);\n        } else if (pubKeyCred instanceof Array) {\n            return pubKeyCred.map(this.decodePublicKeyCredentialToBase64String);\n        } else if (pubKeyCred instanceof Object) {\n            const obj = {};\n            for (let key in pubKeyCred) {\n                obj[key] = this.decodePublicKeyCredentialToBase64String(pubKeyCred[key]);\n            }\n            return obj;\n        } else return pubKeyCred;\n    }\n\n    decodePublicKeyCredential(credential: PublicKeyCredential) {\n        const obj = {};\n        for (let key in credential) {\n            switch (key) {\n                case \"id\":\n                case \"type\":\n                    obj[key] = credential[key];\n                    break;\n                case \"rawId\":\n                    obj[key] = this.arrayBufferToBase64(credential[key])\n                    break;\n                case \"response\":\n                    const utf8Decoder = new TextDecoder('utf-8');\n                    const decodedClientData = utf8Decoder.decode(credential.response.clientDataJSON);\n                    const clientDataObj: ClientDataObj = JSON.parse(decodedClientData);\n                    const decodedAttestationObj: DecodedAttestionObj = CBOR.decode((credential.response as any).attestationObject);\n                    obj[key] = {};\n                    obj[key][\"clientDataJSON\"] = clientDataObj;\n                    obj[key][\"attestationObject\"] = decodedAttestationObj;\n                    break;\n                default:\n                    break;\n            }\n        }\n        return obj;\n    }\n\n    // Validate and Store credential\n    registerCredential(user: User, credential: PublicKeyCredential): boolean {\n        const authData = this.extractAuthData(credential);\n        const credentialIdLength = this.getCredentialIdLength(authData);\n        const credentialId: Uint8Array = authData.slice(55, 55 + credentialIdLength);\n        const publicKeyBytes: Uint8Array = authData.slice(55 + credentialIdLength);\n        // const publicKeyObject = CBOR.decode(publicKeyBytes.buffer);\n        const valid = true;\n        if (valid) {\n            // Save publicKeyBytes and credentialId\n            user.credentials.push({ credentialIdString: this.arrayBufferToBase64(credentialId), publicKeyString: this.arrayBufferToBase64(publicKeyBytes)});\n            this.updateUser(user);\n        }\n        return valid;\n    }\n\n    extractAuthData(credential: PublicKeyCredential): Uint8Array {\n        const decodedAttestationObj: DecodedAttestionObj = CBOR.decode((credential.response as any).attestationObject);\n        const { authData } = decodedAttestationObj;\n        return authData;\n    }\n\n    getCredentialIdLength(authData: Uint8Array): number {\n        // get the length of the credential ID\n        const dataView = new DataView(new ArrayBuffer(2));\n        const idLenBytes = authData.slice(53, 55);\n        idLenBytes.forEach((value, index) => dataView.setUint8(index, value));\n        return dataView.getUint16(0);\n    }\n\n    arrayBufferToStr(buf) {\n        let decoder = new TextDecoder(\"utf-8\");\n        return decoder.decode(buf);\n    }\n\n    decodeAssertion(assertion) {\n        let clientDataStr = this.arrayBufferToStr(assertion.response.clientDataJSON);\n        let clientDataObj: ClientDataObj = JSON.parse(clientDataStr);\n        console.log(\"----------Sign in clientDataObj----------\")\n        console.log(JSON.stringify(clientDataObj));\n        const userHandle = assertion.response.userHandle && this.arrayBufferToStr(assertion.response.userHandle);\n        console.log(\"----------User Handle----------\")\n        console.log(userHandle);\n    }\n\n    arrayBufferToBase64(buffer) {\n        var binary = '';\n        var bytes = new Uint8Array(buffer);\n        var len = bytes.byteLength;\n        for (var i = 0; i < len; i++) {\n            binary += String.fromCharCode(bytes[i]);\n        }\n        return window.btoa(binary);\n    }\n    base64ToArrayBuffer(base64) {\n        let binary_string = window.atob(base64);\n        let len = binary_string.length;\n        let bytes = new Uint8Array(len);\n        for (let i = 0; i < len; i++) {\n            bytes[i] = binary_string.charCodeAt(i);\n        }\n        return bytes.buffer;\n    }\n\n    bufferEncode(value) {\n        return btoa(String.fromCharCode.apply(null, new Uint8Array(value)))\n            .replace(/\\+/g, \"-\")\n            .replace(/\\//g, \"_\")\n            .replace(/=/g, \"\");\n    }\n\n    bufferDecode(value) {\n        return Uint8Array.from(atob(value), c => c.charCodeAt(0));\n    }\n\n    uint8ArrayFromBase64Url(base64Url)\n    {\n        return Uint8Array.from(window.atob(base64Url.replace(/-/g, \"+\").replace(/_/g, \"/\")), (v) => v.charCodeAt(0));\n    }\n    \n     uint8ArrayFromBase64(base64)\n    {\n        return Uint8Array.from(window.atob(base64), (v) => v.charCodeAt(0));\n    }\n    \n}\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { ClientDataObj, DecodedAttestionObj } from 'src/app/models/web-authn.model';\nimport { MockService } from 'src/app/services/mock.service';\nimport * as CBOR from 'src/app/utils/cbor';\nimport { loginPayload, registerPayload } from '../components/web-authn/utils/app-util';\n@Injectable()\nexport class WebAuthnAPIService {\n    private url = '';\n    private baseUrl = 'http://localhost:8080';\n    constructor(public http: HttpClient, private mockService: MockService) {\n    }\n\n    webAuthnRegister(): Observable<any> {\n        this.url = `${this.baseUrl}/web-authn-registration`;\n\n        const utf8Decoder = new TextDecoder('utf-8');\n        const clientData = this.mockService.base64urlDecode(registerPayload.response.clientDataJSON);\n        const decodedClientData = utf8Decoder.decode(clientData);\n        const clientDataObj: ClientDataObj = JSON.parse(decodedClientData);\n        console.log(clientDataObj);\n\n        const attestationObject = this.mockService.base64urlDecode(registerPayload.response.attestationObject);\n        console.log(attestationObject);\n        const decodedAttestationObj: DecodedAttestionObj = CBOR.decode(attestationObject);\n        console.log(decodedAttestationObj);\n\n        const credentialId = this.mockService.base64urlDecode(\"d1U_F_EYDdh37vHhe3bb1Y2uWFw\");\n        console.log(credentialId);\n\n        return this.http.post<any>(this.url, registerPayload);\n    }\n\n    webAuthnLogin(authenticator): Observable<any> {\n        this.url = `${this.baseUrl}/web-authn-authentication`;\n        console.log(loginPayload);\n        loginPayload.authenticator = authenticator;\n        return this.http.post<any>(this.url, loginPayload);\n    }\n\n\n    getChallenge(): Observable<any> {\n        this.url = `${this.baseUrl}/get-challenge`;\n        return this.http.get<any>(this.url);\n    }\n}","import { Injectable } from '@angular/core';\nimport { User } from 'src/app/models/web-authn.model';\nimport { MockService } from './mock.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class WebAuthnMockService {\n\n    constructor(private mockService: MockService) { }\n    private getPlatformFlag(): boolean {\n        return !!JSON.parse(localStorage.getItem('isPlatform'));\n    }\n\n    signup(user: User): Promise<Credential> {\n        const authenticatorAttachment = this.getPlatformFlag() ? 'platform' : 'cross-platform';\n        const challenge: string = this.mockService.genUUID();\n        console.log(\"----------Sign up challenge----------\");\n        console.log(challenge);\n        const publicKeyCredentialCreationOptions: PublicKeyCredentialCreationOptions = {\n            // Should generate from server\n            challenge: Uint8Array.from(challenge, c => c.charCodeAt(0)),\n            // Relying Party\n            rp: {\n                name: \"demo\",\n                // id: \"\" // domain\n            },\n            user: {\n                // Some user id coming from the server\n                id: Uint8Array.from(user.mobileNumber, c => c.charCodeAt(0)),\n                name: user.email,\n                displayName: user.email,\n            },\n            pubKeyCredParams: [{ alg: -7, type: 'public-key' }],\n            authenticatorSelection: {\n                // authenticatorAttachment,\n                authenticatorAttachment: 'platform',\n                userVerification: 'required'\n            },\n            timeout: 100000,\n            attestation: 'direct'\n        };\n        console.log(\"----------Sign up Payload----------\");\n        console.log(JSON.stringify(publicKeyCredentialCreationOptions));\n        return navigator.credentials.create({\n            publicKey: publicKeyCredentialCreationOptions,\n        });\n    }\n\n    signin(user: User): Promise<Credential> {\n        const transports: AuthenticatorTransport[] = this.getPlatformFlag() ? ['internal'] : ['usb'];\n        const allowCredentials: PublicKeyCredentialDescriptor[] = user.credentials.map(c => {\n            return {\n                // transports, \n                transports: ['internal'],\n                type: 'public-key', id: new Uint8Array(this.mockService.base64ToArrayBuffer(c.credentialIdString))\n                // id: Uint8Array.from(c.credentialId)\n            };\n        });\n\n        console.log(\"----------Sign in challenge----------\");\n        const challenge: string = this.mockService.genUUID();\n        console.log(challenge);\n        const credentialRequestOptions: PublicKeyCredentialRequestOptions = {\n            challenge: Uint8Array.from(challenge, c => c.charCodeAt(0)),\n            allowCredentials,\n            userVerification: 'required'\n\n        };\n        console.log(\"----------Sign in Payload----------\")\n        console.log(JSON.stringify(credentialRequestOptions));\n\n        return navigator.credentials.get({\n            publicKey: credentialRequestOptions,\n        });\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { from, of } from 'rxjs';\nimport { DecodedAttestionObj, User } from 'src/app/models/web-authn.model';\nimport { MockService } from 'src/app/services/mock.service';\nimport * as CBOR from 'src/app/utils/cbor';\nimport { catchError, finalize, switchMap } from 'rxjs/operators';\nimport { HttpClient } from '@angular/common/http';\n@Injectable()\nexport class WebAuthnService {\n    private url = '';\n    private baseUrl = 'http://localhost:8080';\n    constructor(public http: HttpClient, private mockService: MockService) {\n    }\n\n    private getPlatformFlag(): boolean {\n        return !!JSON.parse(localStorage.getItem('isPlatform'));\n    }\n    private generateUUIDv4() {\n        return (`${[1e7]}${-1e3}${-4e3}${-8e3}${-1e11}`).replace(/[018]/g, (c: any) =>\n            (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n        );\n    }\n\n    private getChallenge(): Observable<any> {\n        return of(this.generateUUIDv4());\n    }\n\n    private getChallengeFromServer(): Observable<any> {\n        this.url = `${this.baseUrl}/get-challenge`;\n        return this.http.get<any>(this.url);\n    }\n\n    private publicKeyCredentialToBase64Url(publicKeyCred) {\n        if (publicKeyCred instanceof ArrayBuffer) {\n            return this.base64urlEncode(publicKeyCred);\n        } else if (publicKeyCred instanceof Array) {\n            return publicKeyCred.map(this.publicKeyCredentialToBase64Url);\n        } else if (publicKeyCred instanceof Object) {\n            const obj = {};\n            for (let key in publicKeyCred) {\n                obj[key] = this.publicKeyCredentialToBase64Url(publicKeyCred[key]);\n            }\n            return obj;\n        } else return publicKeyCred;\n    }\n\n    private base64urlEncode(arraybuffer) {\n        let chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\";\n        // Use a lookup table to find the index.\n        let lookup = new Uint8Array(256);\n        for (let i = 0; i < chars.length; i++) {\n            lookup[chars.charCodeAt(i)] = i;\n        }\n        let bytes = new Uint8Array(arraybuffer),\n            i, len = bytes.length, base64 = \"\";\n\n        for (i = 0; i < len; i += 3) {\n            base64 += chars[bytes[i] >> 2];\n            base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n            base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n            base64 += chars[bytes[i + 2] & 63];\n        }\n\n        if ((len % 3) === 2) {\n            base64 = base64.substring(0, base64.length - 1);\n        } else if (len % 3 === 1) {\n            base64 = base64.substring(0, base64.length - 2);\n        }\n\n        return base64;\n    }\n\n    private base64urlDecode(base64) {\n        let chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\";\n        // Use a lookup table to find the index.\n        var lookup = new Uint8Array(256);\n        for (let i = 0; i < chars.length; i++) {\n            lookup[chars.charCodeAt(i)] = i;\n        }\n        let bufferLength = base64.length * 0.75,\n            len = base64.length, i, p = 0,\n            encoded1, encoded2, encoded3, encoded4;\n\n        let arraybuffer = new ArrayBuffer(bufferLength),\n            bytes = new Uint8Array(arraybuffer);\n\n        for (i = 0; i < len; i += 4) {\n            encoded1 = lookup[base64.charCodeAt(i)];\n            encoded2 = lookup[base64.charCodeAt(i + 1)];\n            encoded3 = lookup[base64.charCodeAt(i + 2)];\n            encoded4 = lookup[base64.charCodeAt(i + 3)];\n\n            bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n            bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n            bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n        }\n\n        return arraybuffer;\n    };\n\n    private signup(credential): Observable<any> {\n        this.url = `${this.baseUrl}/web-authn-registration`;\n        return this.http.post<any>(this.url, credential);\n    }\n\n    private webAuthnSignup(user: User, challenge: string): Promise<Credential> {\n        const authenticatorAttachment = this.getPlatformFlag() ? 'platform' : 'cross-platform';\n        const publicKeyCredentialCreationOptions: PublicKeyCredentialCreationOptions = {\n            // Should generate from server\n            challenge: Uint8Array.from(challenge, c => c.charCodeAt(0)),\n            // Relying Party\n            rp: {\n                name: \"demo\",\n                // id: \"\" // domain\n            },\n            user: {\n                // Some user id coming from the server\n                id: Uint8Array.from(user.mobileNumber, c => c.charCodeAt(0)),\n                name: user.email,\n                displayName: user.email,\n            },\n            pubKeyCredParams: [{ alg: -7, type: 'public-key' }],\n            authenticatorSelection: {\n                authenticatorAttachment,\n                userVerification: \"required\"\n            },\n            timeout: 100000,\n            attestation: 'direct'\n        };\n        return navigator.credentials.create({\n            publicKey: publicKeyCredentialCreationOptions,\n        });\n    }\n\n    private signin(credential): Observable<any> {\n        this.url = `${this.baseUrl}/web-authn-authentication`;\n        return this.http.post<any>(this.url, credential);\n    }\n\n    private webAuthnSignin(user: User, challenge: string): Promise<Credential> {\n        const transports: AuthenticatorTransport[] = this.getPlatformFlag() ? ['internal'] : ['usb'];\n        const allowCredentials: PublicKeyCredentialDescriptor[] = user.credentials.map(c => {\n            const credentialId = new Uint8Array(this.base64urlDecode(c.credentialIdString));\n            return {\n                transports, type: 'public-key', id: credentialId\n                // id: Uint8Array.from(c.credentialId),\n            };\n        });\n\n        const credentialRequestOptions: PublicKeyCredentialRequestOptions = {\n            challenge: Uint8Array.from('5a31ec74-8280-4f61-abf0-810aab460570', c => c.charCodeAt(0)),\n            allowCredentials,\n            userVerification: \"required\"\n        };\n        console.log(\"----------Sign in Payload----------\")\n        console.log(JSON.stringify(credentialRequestOptions));\n\n        return navigator.credentials.get({\n            publicKey: credentialRequestOptions,\n        });\n    }\n\n\n    private isSupportBiometricLogin(): Observable<boolean> {\n        if (window.PublicKeyCredential) {\n            return from(new Promise<boolean>((resolve, reject) => {\n                PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()\n                    .then(available => {\n                        if (available) {\n                            // console.log(\"Supported.\");\n                            resolve(true);\n                        } else {\n                            // console.log(\"WebAuthn supported, Platform Authenticator *not* supported.\");\n                            resolve(false);\n                        }\n                    })\n                    .catch(error => {\n                        // console.log(\"Something went wrong.\");\n                        resolve(false);\n                    })\n            }));\n        } else {\n            // console.log(\"Not supported.\");\n            return of(false);\n        }\n    };\n\n    signupFlow(user): Observable<any> {\n        return this.getChallengeFromServer().pipe(\n            switchMap(challengeResp => {\n                const { challenge } = challengeResp;\n                console.log(challenge);\n                return from(\n                    this.webAuthnSignup(user, challenge)\n                        .then((credential: any) => {\n                            const credentialBase64Url = this.publicKeyCredentialToBase64Url(credential);\n                            return Promise.resolve(credentialBase64Url)\n                        })\n                        .catch(error => Promise.reject(error))\n                )\n            }),\n            switchMap(credentialBase64Url => {\n                return this.signup(credentialBase64Url);\n            }),\n            catchError(error => {\n                // handle error\n                return of(error);\n            }),\n            finalize(() => console.log(\"Finished\"))\n        );\n    };\n\n    signinFlow(user: User): Observable<any> {\n        return this.getChallengeFromServer().pipe(\n            switchMap(challengeResp => {\n                const { challenge } = challengeResp;\n                console.log(challenge);\n                return from(this.webAuthnSignin(user, challenge)\n                    .then(assertion => {\n                        const credentialBase64Url = this.publicKeyCredentialToBase64Url(assertion);\n                        credentialBase64Url.response.userHandle = credentialBase64Url.response.userHandle || '';\n                        credentialBase64Url.authenticator = {\n                            credentialIdString: user.credentials[0].credentialIdString,\n                            authenticatorString: user.authenticatorString\n                        };\n                        return Promise.resolve(credentialBase64Url);\n                    })\n                    .catch(error => Promise.reject(error))\n                )\n            }),\n            switchMap(credentialBase64Url => {\n                return this.signin(credentialBase64Url);\n            }),\n            catchError(error => {\n                // handle error \n                return of(error)\n            })\n        );\n    };\n\n    // ----------------------------------------------------------------------------------------------------------\n\n\n    // Validate and Store credential\n    registerCredential(credential: PublicKeyCredential): Uint8Array {\n        const authData = this.extractAuthData(credential);\n        const credentialIdLength = this.getCredentialIdLength(authData);\n        const credentialId: Uint8Array = authData.slice(55, 55 + credentialIdLength);\n        const publicKeyBytes: Uint8Array = authData.slice(55 + credentialIdLength);\n        // const publicKeyObject = CBOR.decode(publicKeyBytes.buffer);\n        const valid = true;\n        if (valid) {\n            // Save publicKeyBytes and credentialId\n            return credentialId;\n        }\n    }\n\n    extractAuthData(credential: PublicKeyCredential): Uint8Array {\n        const decodedAttestationObj: DecodedAttestionObj = CBOR.decode((credential.response as any).attestationObject);\n        const { authData } = decodedAttestationObj;\n        return authData;\n    }\n\n    getCredentialIdLength(authData: Uint8Array): number {\n        // get the length of the credential ID\n        const dataView = new DataView(new ArrayBuffer(2));\n        const idLenBytes = authData.slice(53, 55);\n        idLenBytes.forEach((value, index) => dataView.setUint8(index, value));\n        return dataView.getUint16(0);\n    }\n}","/*\n * The MIT License (MIT)\n *\n * Copyright (c) 2014-2016 Patrick Gansterer <paroga@paroga.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n(function(global, undefined) { \"use strict\";\nvar POW_2_24 = 5.960464477539063e-8,\n    POW_2_32 = 4294967296,\n    POW_2_53 = 9007199254740992;\n\nfunction encode(value) {\n  var data = new ArrayBuffer(256);\n  var dataView = new DataView(data);\n  var lastLength;\n  var offset = 0;\n\n  function prepareWrite(length) {\n    var newByteLength = data.byteLength;\n    var requiredLength = offset + length;\n    while (newByteLength < requiredLength)\n      newByteLength <<= 1;\n    if (newByteLength !== data.byteLength) {\n      var oldDataView = dataView;\n      data = new ArrayBuffer(newByteLength);\n      dataView = new DataView(data);\n      var uint32count = (offset + 3) >> 2;\n      for (var i = 0; i < uint32count; ++i)\n        dataView.setUint32(i << 2, oldDataView.getUint32(i << 2));\n    }\n\n    lastLength = length;\n    return dataView;\n  }\n  function commitWrite() {\n    offset += lastLength;\n  }\n  function writeFloat64(value) {\n    commitWrite(prepareWrite(8).setFloat64(offset, value));\n  }\n  function writeUint8(value) {\n    commitWrite(prepareWrite(1).setUint8(offset, value));\n  }\n  function writeUint8Array(value) {\n    var dataView = prepareWrite(value.length);\n    for (var i = 0; i < value.length; ++i)\n      dataView.setUint8(offset + i, value[i]);\n    commitWrite();\n  }\n  function writeUint16(value) {\n    commitWrite(prepareWrite(2).setUint16(offset, value));\n  }\n  function writeUint32(value) {\n    commitWrite(prepareWrite(4).setUint32(offset, value));\n  }\n  function writeUint64(value) {\n    var low = value % POW_2_32;\n    var high = (value - low) / POW_2_32;\n    var dataView = prepareWrite(8);\n    dataView.setUint32(offset, high);\n    dataView.setUint32(offset + 4, low);\n    commitWrite();\n  }\n  function writeTypeAndLength(type, length) {\n    if (length < 24) {\n      writeUint8(type << 5 | length);\n    } else if (length < 0x100) {\n      writeUint8(type << 5 | 24);\n      writeUint8(length);\n    } else if (length < 0x10000) {\n      writeUint8(type << 5 | 25);\n      writeUint16(length);\n    } else if (length < 0x100000000) {\n      writeUint8(type << 5 | 26);\n      writeUint32(length);\n    } else {\n      writeUint8(type << 5 | 27);\n      writeUint64(length);\n    }\n  }\n\n  function encodeItem(value) {\n    var i;\n\n    if (value === false)\n      return writeUint8(0xf4);\n    if (value === true)\n      return writeUint8(0xf5);\n    if (value === null)\n      return writeUint8(0xf6);\n    if (value === undefined)\n      return writeUint8(0xf7);\n\n    switch (typeof value) {\n      case \"number\":\n        if (Math.floor(value) === value) {\n          if (0 <= value && value <= POW_2_53)\n            return writeTypeAndLength(0, value);\n          if (-POW_2_53 <= value && value < 0)\n            return writeTypeAndLength(1, -(value + 1));\n        }\n        writeUint8(0xfb);\n        return writeFloat64(value);\n\n      case \"string\":\n        var utf8data = [];\n        for (i = 0; i < value.length; ++i) {\n          var charCode = value.charCodeAt(i);\n          if (charCode < 0x80) {\n            utf8data.push(charCode);\n          } else if (charCode < 0x800) {\n            utf8data.push(0xc0 | charCode >> 6);\n            utf8data.push(0x80 | charCode & 0x3f);\n          } else if (charCode < 0xd800) {\n            utf8data.push(0xe0 | charCode >> 12);\n            utf8data.push(0x80 | (charCode >> 6)  & 0x3f);\n            utf8data.push(0x80 | charCode & 0x3f);\n          } else {\n            charCode = (charCode & 0x3ff) << 10;\n            charCode |= value.charCodeAt(++i) & 0x3ff;\n            charCode += 0x10000;\n\n            utf8data.push(0xf0 | charCode >> 18);\n            utf8data.push(0x80 | (charCode >> 12)  & 0x3f);\n            utf8data.push(0x80 | (charCode >> 6)  & 0x3f);\n            utf8data.push(0x80 | charCode & 0x3f);\n          }\n        }\n\n        writeTypeAndLength(3, utf8data.length);\n        return writeUint8Array(utf8data);\n\n      default:\n        var length;\n        if (Array.isArray(value)) {\n          length = value.length;\n          writeTypeAndLength(4, length);\n          for (i = 0; i < length; ++i)\n            encodeItem(value[i]);\n        } else if (value instanceof Uint8Array) {\n          writeTypeAndLength(2, value.length);\n          writeUint8Array(value);\n        } else {\n          var keys = Object.keys(value);\n          length = keys.length;\n          writeTypeAndLength(5, length);\n          for (i = 0; i < length; ++i) {\n            var key = keys[i];\n            encodeItem(key);\n            encodeItem(value[key]);\n          }\n        }\n    }\n  }\n\n  encodeItem(value);\n\n  if (\"slice\" in data)\n    return data.slice(0, offset);\n\n  var ret = new ArrayBuffer(offset);\n  var retView = new DataView(ret);\n  for (var i = 0; i < offset; ++i)\n    retView.setUint8(i, dataView.getUint8(i));\n  return ret;\n}\n\nfunction decode(data, tagger, simpleValue) {\n  var dataView = new DataView(data);\n  var offset = 0;\n\n  if (typeof tagger !== \"function\")\n    tagger = function(value) { return value; };\n  if (typeof simpleValue !== \"function\")\n    simpleValue = function() { return undefined; };\n\n  function commitRead(length, value) {\n    offset += length;\n    return value;\n  }\n  function readArrayBuffer(length) {\n    return commitRead(length, new Uint8Array(data, offset, length));\n  }\n  function readFloat16() {\n    var tempArrayBuffer = new ArrayBuffer(4);\n    var tempDataView = new DataView(tempArrayBuffer);\n    var value = readUint16();\n\n    var sign = value & 0x8000;\n    var exponent = value & 0x7c00;\n    var fraction = value & 0x03ff;\n\n    if (exponent === 0x7c00)\n      exponent = 0xff << 10;\n    else if (exponent !== 0)\n      exponent += (127 - 15) << 10;\n    else if (fraction !== 0)\n      return (sign ? -1 : 1) * fraction * POW_2_24;\n\n    tempDataView.setUint32(0, sign << 16 | exponent << 13 | fraction << 13);\n    return tempDataView.getFloat32(0);\n  }\n  function readFloat32() {\n    return commitRead(4, dataView.getFloat32(offset));\n  }\n  function readFloat64() {\n    return commitRead(8, dataView.getFloat64(offset));\n  }\n  function readUint8() {\n    return commitRead(1, dataView.getUint8(offset));\n  }\n  function readUint16() {\n    return commitRead(2, dataView.getUint16(offset));\n  }\n  function readUint32() {\n    return commitRead(4, dataView.getUint32(offset));\n  }\n  function readUint64() {\n    return readUint32() * POW_2_32 + readUint32();\n  }\n  function readBreak() {\n    if (dataView.getUint8(offset) !== 0xff)\n      return false;\n    offset += 1;\n    return true;\n  }\n  function readLength(additionalInformation) {\n    if (additionalInformation < 24)\n      return additionalInformation;\n    if (additionalInformation === 24)\n      return readUint8();\n    if (additionalInformation === 25)\n      return readUint16();\n    if (additionalInformation === 26)\n      return readUint32();\n    if (additionalInformation === 27)\n      return readUint64();\n    if (additionalInformation === 31)\n      return -1;\n    throw \"Invalid length encoding\";\n  }\n  function readIndefiniteStringLength(majorType) {\n    var initialByte = readUint8();\n    if (initialByte === 0xff)\n      return -1;\n    var length = readLength(initialByte & 0x1f);\n    if (length < 0 || (initialByte >> 5) !== majorType)\n      throw \"Invalid indefinite length element\";\n    return length;\n  }\n\n  function appendUtf16Data(utf16data, length) {\n    for (var i = 0; i < length; ++i) {\n      var value = readUint8();\n      if (value & 0x80) {\n        if (value < 0xe0) {\n          value = (value & 0x1f) <<  6\n                | (readUint8() & 0x3f);\n          length -= 1;\n        } else if (value < 0xf0) {\n          value = (value & 0x0f) << 12\n                | (readUint8() & 0x3f) << 6\n                | (readUint8() & 0x3f);\n          length -= 2;\n        } else {\n          value = (value & 0x0f) << 18\n                | (readUint8() & 0x3f) << 12\n                | (readUint8() & 0x3f) << 6\n                | (readUint8() & 0x3f);\n          length -= 3;\n        }\n      }\n\n      if (value < 0x10000) {\n        utf16data.push(value);\n      } else {\n        value -= 0x10000;\n        utf16data.push(0xd800 | (value >> 10));\n        utf16data.push(0xdc00 | (value & 0x3ff));\n      }\n    }\n  }\n\n  function decodeItem() {\n    var initialByte = readUint8();\n    var majorType = initialByte >> 5;\n    var additionalInformation = initialByte & 0x1f;\n    var i;\n    var length;\n\n    if (majorType === 7) {\n      switch (additionalInformation) {\n        case 25:\n          return readFloat16();\n        case 26:\n          return readFloat32();\n        case 27:\n          return readFloat64();\n      }\n    }\n\n    length = readLength(additionalInformation);\n    if (length < 0 && (majorType < 2 || 6 < majorType))\n      throw \"Invalid length\";\n\n    switch (majorType) {\n      case 0:\n        return length;\n      case 1:\n        return -1 - length;\n      case 2:\n        if (length < 0) {\n          var elements = [];\n          var fullArrayLength = 0;\n          while ((length = readIndefiniteStringLength(majorType)) >= 0) {\n            fullArrayLength += length;\n            elements.push(readArrayBuffer(length));\n          }\n          var fullArray = new Uint8Array(fullArrayLength);\n          var fullArrayOffset = 0;\n          for (i = 0; i < elements.length; ++i) {\n            fullArray.set(elements[i], fullArrayOffset);\n            fullArrayOffset += elements[i].length;\n          }\n          return fullArray;\n        }\n        return readArrayBuffer(length);\n      case 3:\n        var utf16data = [];\n        if (length < 0) {\n          while ((length = readIndefiniteStringLength(majorType)) >= 0)\n            appendUtf16Data(utf16data, length);\n        } else\n          appendUtf16Data(utf16data, length);\n        return String.fromCharCode.apply(null, utf16data);\n      case 4:\n        var retArray;\n        if (length < 0) {\n          retArray = [];\n          while (!readBreak())\n            retArray.push(decodeItem());\n        } else {\n          retArray = new Array(length);\n          for (i = 0; i < length; ++i)\n            retArray[i] = decodeItem();\n        }\n        return retArray;\n      case 5:\n        var retObject = {};\n        for (i = 0; i < length || length < 0 && !readBreak(); ++i) {\n          var key = decodeItem();\n          retObject[key] = decodeItem();\n        }\n        return retObject;\n      case 6:\n        return tagger(decodeItem(), length);\n      case 7:\n        switch (length) {\n          case 20:\n            return false;\n          case 21:\n            return true;\n          case 22:\n            return null;\n          case 23:\n            return undefined;\n          default:\n            return simpleValue(length);\n        }\n    }\n  }\n\n  var ret = decodeItem();\n  if (offset !== data.byteLength)\n    throw \"Remaining bytes\";\n  return ret;\n}\n\nvar obj = { encode: encode, decode: decode };\n\nif (typeof define === \"function\" && define.amd)\n  define(\"cbor/cbor\", obj);\nelse if (typeof module !== \"undefined\" && module.exports)\n  module.exports = obj;\nelse if (!global.CBOR)\n  global.CBOR = obj;\n\n})(this);","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  platformBrowserDynamic()\n    .bootstrapModule(AppModule)\n    .then(() => {\n      if ('serviceWorker' in navigator) {\n        console.log('Service Worker is supported');\n        navigator.serviceWorker.register('/firebase-messaging-sw.js')\n          .then(function (swReg) {\n            console.log('Service Worker is registered', swReg);\n          })\n          .catch(function (error) {\n            console.error('Service Worker Error', error);\n          });\n      }\n      if ('PushManager' in window) {\n        Notification.requestPermission(function (status) {\n          console.log('Notification permission status:', status);\n        });\n        console.log('Push messaging is supported');\n      } else {\n        console.error('Push messaging is not supported');\n      }\n    })\n    .catch(err => console.log(err));\n});"]}